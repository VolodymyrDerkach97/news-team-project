{"mappings":"qhBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,ySCCzDH,EAAA,S,6DCDAI,EAAiB,IAAAC,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FC,EAAiB,IAAAN,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,MCA5FE,EAAiB,IAAAP,IAAoBL,EAAA,SAAAM,QAA6C,SAAQC,OAAAC,KAAAC,KAAEC,W,4BCM5F,MAAMG,EAAqBC,SAASC,cAAc,cAE5CC,EAAed,KAAKC,MAAMc,aAAaC,QAAQ,kBAAoB,GAEzEL,EAAmBM,iBAAiB,SAAS,SAAUC,GACpCA,EAAMC,OAEVC,UAAUC,SAAS,+BAqElC,SAA6BH,GAC3B,MAAMI,EAAetB,KAAKC,MAAMc,aAAaC,QAAQ,kBAAoB,GACnEO,EAAWL,EAAMC,OACvBK,QAAQC,IAAIF,GAEZ,MAAMG,EAASH,EAASI,QAAQD,OAC1BE,EAAgBN,EAAaO,WACjCC,GAAYA,EAASC,QAAUL,KAEX,IAAlBE,IACFN,EAAaU,OAAOJ,EAAe,GACnCb,aAAakB,QAAQ,eAAgBjC,KAAKkC,UAAUZ,IACpDa,SAASC,S,CAhFTC,CAAoBnB,E,IAMxB,SAAuBoB,GAChBA,GAAsB,IAAfA,EAAIC,QA8ElB,WACE,MAAMC,EAAS,yHAGDC,EAAA/B,2EAEdC,EAAmB+B,mBAAmB,YAAaF,E,CAnFjDG,GAGF,IAAIjB,EAAS,GACTY,EAAIC,SACNb,EAASY,EAAIM,KAAI,EAACC,GAAEA,KAASA,EAAGC,iBAGlC,MAAMN,EAAS,0CAA0CF,EACtDM,KACC,EAACG,SAAEA,EAAQC,QAAEA,EAAOjB,MAAEA,EAAKkB,eAAEA,EAAcC,WAAEA,EAAa,GAAE3C,IAAEA,MAC5D,MAAM4C,EAAOzB,EAAO0B,SAASrB,EAAMe,eAC7BO,EAAeF,EAAO,uBAAyB,kBAC/CG,EAAYH,EAAO,gBAAkB,aAS3C,MAAO,iFANLD,GAAcA,EAAW,IAAI3C,IAAM2C,EAAW,GAAG3C,IAAMkC,EAAAhC,YAEvDyC,GAAcA,EAAW,IAAIK,QACzBL,EAAW,GAAGK,QACd,uFAMTP,2EAEwDjB,MAAUsB,kFACtDZ,EAAAvC,MAAaoD,0HAMxBvB,sDAGAgB,mGAKAE,2BAEO1C,oGAAsGwB,oDAMlH,IAGIyB,KAAK,iBAER7C,EAAmB+B,mBAAmB,YAAaF,IACnD,EAAAiB,EAAAC,gBAAe5C,E,CA7DjB6C,CAAc7C,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-b5fde08f07fa5622.js","src/favorite.js","node_modules/@parcel/runtime-js/lib/runtime-1bccbf6f16d389a0.js","node_modules/@parcel/runtime-js/lib/runtime-3287f7031201970b.js","node_modules/@parcel/runtime-js/lib/runtime-85d247d694341ee7.js","src/js/favorite-page.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"kHKil\\\":\\\"favorite.d24a03e0.js\\\",\\\"7XZkW\\\":\\\"defaultimage.febeee97.jpg\\\",\\\"dCaos\\\":\\\"icons.4066d7ef.svg\\\",\\\"9p2Wc\\\":\\\"default_hidden.b7ff1915.png\\\",\\\"eesMw\\\":\\\"index.14ee4777.js\\\",\\\"hmz2r\\\":\\\"read.7a7ff9a4.js\\\"}\"));","// import './js/add-to-favorite';\nimport './js/current-page';\nimport './js/mobile-menu';\nimport './js/toggle-switcher-theme';\nimport './js/search-form';\nimport './js/formOpen';\nimport './js/formRegFatchData';\n// import './js/to-favorite';\nimport './js/favorite-page';\nimport './js/btn-scroll-up';\n","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"dCaos\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"7XZkW\")).toString();","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"9p2Wc\")).toString();","import svgSprite from '../images/icons/icons.svg';\nimport defImg from '../images/defaultimage.jpg';\nimport defImgPng from '../images/default_hidden.png';\nimport { checkFavorites } from './btn-add-remove';\nimport { readMore, checkRead } from './btn-read-more';\n\nconst favoriteNewsCardEl = document.querySelector('.news-card');\n\nconst favoriteList = JSON.parse(localStorage.getItem('favoriteList')) || [];\n\nfavoriteNewsCardEl.addEventListener('click', function (event) {\n  const targetEl = event.target;\n\n  if (targetEl.classList.contains('news-card__favorite-button')) {\n    deleteFromFavorites(event);\n  }\n});\n\nrenderArticle(favoriteList);\n\nfunction renderArticle(res) {\n  if (!res || res.length === 0) {\n    pageEmpty();\n  }\n\n  let newsId = [];\n  if (res.length) {\n    newsId = res.map(({ id }) => id.toUpperCase());\n  }\n\n  const markup = `<ul class=\"news-card__image-container\">${res\n    .map(\n      ({ abstract, section, title, published_date, multimedia = [], url }) => {\n        const bool = newsId.includes(title.toUpperCase());\n        const articleTitle = bool ? 'Remove from favorite' : 'Add to favorite';\n        const iconClass = bool ? 'icon-favorite' : 'icon-heart';\n\n        const imageUrl =\n          multimedia && multimedia[2]?.url ? multimedia[2].url : defImg;\n        const imageAlt =\n          multimedia && multimedia[2]?.caption\n            ? multimedia[2].caption\n            : 'Default Image';\n\n        return `<li class=\"news-card__item\">\n   <div class=\"news-card__foto\">\n    <img src=\"${imageUrl}\" alt=\"${imageAlt}\" class=\"news-card__image\">\n  <div class=\"news-card__category\">\n   ${section}\n  </div>\n  <button class=\"news-card__favorite-button\" data-news-id=\"${title}\">${articleTitle}<svg width=\"13\" height=\"12\" class=\"news-card__favorite-icon\">\n    <use href=\"${svgSprite}#${iconClass}\"></use></svg>\n\n  </button>\n  </div>\n  <div class=\"news-card__description\">\n  <h2 class=\"news-card__title\">\n    ${title}\n  </h2>\n  <p class=\"news-card__abstract\">\n    ${abstract}\n  </p>\n  </div>\n  <div class=\"news-card__container\">\n  <div class=\"news-card__date\">\n    ${published_date}\n  </div>\n  <a href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" class=\"news-card__read-more\" data-news-id=\"${title}\">\n    Read more\n  </a>\n \n  </div>\n  </li>\n`;\n      }\n    )\n    .join('')}\n    </ul>`;\n  favoriteNewsCardEl.insertAdjacentHTML('beforeEnd', markup);\n  checkFavorites(favoriteList);\n}\n\nfunction deleteFromFavorites(event) {\n  const favoriteList = JSON.parse(localStorage.getItem('favoriteList')) || [];\n  const targetEl = event.target;\n  console.log(targetEl);\n\n  const newsId = targetEl.dataset.newsId;\n  const favoriteIndex = favoriteList.findIndex(\n    favorite => favorite.title === newsId\n  );\n  if (favoriteIndex !== -1) {\n    favoriteList.splice(favoriteIndex, 1);\n    localStorage.setItem('favoriteList', JSON.stringify(favoriteList));\n    location.reload();\n    // renderArticle(favoriteList);\n  }\n}\n\nfunction pageEmpty() {\n  const markup = `\n    <div class=\"page-empty\">\n    <h2 class=\"page-empty__text\">You don't have any favorite news</h2>\n    <img src=\"${defImgPng}\" alt=\"You have no favorite news\" class=\"page-empty__img\">\n    </div>`;\n  favoriteNewsCardEl.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["parcelRequire","register","JSON","parse","$0b3222e46369e54d$exports","URL","resolve","import","meta","url","toString","$eec871c95434dc88$exports","$4f50b5e50ffdae97$exports","$1c0bffe6411de2f6$var$favoriteNewsCardEl","document","querySelector","$1c0bffe6411de2f6$var$favoriteList","localStorage","getItem","addEventListener","event","target","classList","contains","favoriteList1","targetEl","console","log","newsId","dataset","favoriteIndex","findIndex","favorite","title","splice","setItem","stringify","location","reload","$1c0bffe6411de2f6$var$deleteFromFavorites","res","length","markup","$parcel$interopDefault","insertAdjacentHTML","$1c0bffe6411de2f6$var$pageEmpty","map","id","toUpperCase","abstract","section","published_date","multimedia","bool","includes","articleTitle","iconClass","caption","join","$jcdIr","checkFavorites","$1c0bffe6411de2f6$var$renderArticle"],"version":3,"file":"favorite.d24a03e0.js.map"}