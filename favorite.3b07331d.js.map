{"mappings":"iiBAAAA,EAAA,SAAAC,SAA8CC,KAAKC,MAAM,ySCCzDH,EAAA,S,6DCDAI,EAAiBJ,EAAA,SAAAK,aAA6C,SAAWL,EAAA,SAAAM,QAA6C,S,MCAtHC,EAAiBP,EAAA,SAAAK,aAA6C,SAAWL,EAAA,SAAAM,QAA6C,S,MCAtHE,EAAiBR,EAAA,SAAAK,aAA6C,SAAWL,EAAA,SAAAM,QAA6C,S,8BCMhHG,EAAqBC,SAASC,cAAc,uBAC5CC,EAAeV,KAAKC,MAAMU,aAAaC,QAAQ,kBAAoB,GAEzEL,EAAmBM,iBAAiB,SAqEpC,SAA6BC,GAC3B,IAAMC,EAAef,KAAKC,MAAMU,aAAaC,QAAQ,kBAAoB,GACnEI,EAAWF,EAAMG,OACvBC,QAAQC,IAAIH,GAEZ,IAAMI,EAASJ,EAASK,QAAQD,OAC1BE,EAAgBP,EAAaQ,WACjC,SAAAC,G,OAAYA,EAASC,QAAUL,C,KAEX,IAAlBE,IACFP,EAAaW,OAAOJ,EAAe,GACnCX,aAAagB,QAAQ,eAAgB3B,KAAK4B,UAAUb,IACpDc,SAASC,S,IA/EWtB,SAASuB,iBAAiB,yBAClCC,SAAQ,SAAAC,G,OAAUA,EAAOpB,iBAAiB,QAASqB,EAAAC,S,IAInE,SAAuBC,GAChBA,GAAsB,IAAfA,EAAIC,QA8ElB,WACE,IAAMC,EAAS,0HAGSC,OAAVC,EAAAlC,GAAU,0EAExBC,EAAmBkC,mBAAmB,YAAaH,E,CAnFjDI,GAGF,IAAItB,EAAS,GACTgB,EAAIC,SACNjB,EAASgB,EAAIO,KAAI,SAAAC,G,OAAKA,EAAFC,GAAYC,a,KAGlC,IAAMR,EAAS,0CA8CHC,OA9C6CH,EACtDO,KACC,SAAAC,G,IAMkBG,EAEAC,EARfC,EAAQL,EAARK,SAAUC,EAAON,EAAPM,QAASzB,EAAKmB,EAALnB,MAAO0B,EAAcP,EAAdO,eAAcC,EAAAR,EAAES,kBAAU,IAAAD,EAAG,GAAEA,EAAEE,EAAGV,EAAHU,IACtDC,EAAOnC,EAAOoC,SAAS/B,EAAMqB,eAC7BW,EAAeF,EAAO,uBAAyB,kBAC/CG,EAAYH,EAAO,gBAAkB,aAErCI,EACJN,IAA2B,QAAbN,EAAAM,EAAW,UAAE,IAAbN,OAAA,EAAAA,EAAeO,KAAMD,EAAW,GAAGC,IAAMd,EAAAnC,GACnDuD,EACJP,IAA2B,QAAbL,EAAAK,EAAW,UAAE,IAAbL,OAAA,EAAAA,EAAea,SACzBR,EAAW,GAAGQ,QACd,gBAEN,MAAO,iFAEmBtB,OAAlBoB,EAAS,WAEpBpB,OAF6BqB,EAAS,yEAIkBrB,OAFxDW,EAAQ,2EAE0DX,OAAVd,EAAM,MAClDc,OADsDkB,EAAa,kFACtDlB,OAAbC,EAAAtC,GAAU,KAMrBqC,OANwBmB,EAAU,0HASlCnB,OAHAd,EAAM,sDAQNc,OALAU,EAAS,mGAOFV,OAFPY,EAAe,2BAE8FZ,OAAtGe,EAAI,oGAAwGf,OAANd,EAAM,oD,IASpHqC,KAAK,IAAI,eAEZvD,EAAmBkC,mBAAmB,YAAaH,IACnD,EAAAyB,EAAAC,gBAAetD,E,CA7DjBuD,CAAcvD,G","sources":["node_modules/@parcel/runtime-js/lib/runtime-1354c0e372ff2bc2.js","src/favorite.js","node_modules/@parcel/runtime-js/lib/runtime-fdd730f546862575.js","node_modules/@parcel/runtime-js/lib/runtime-8e649747d001a98c.js","node_modules/@parcel/runtime-js/lib/runtime-bee974496c9d4bf3.js","src/js/favorite-page.js"],"sourcesContent":["require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"StDo9\\\":\\\"favorite.3b07331d.js\\\",\\\"aJDWo\\\":\\\"defaultimage.febeee97.jpg\\\",\\\"iBapZ\\\":\\\"icons.4066d7ef.svg\\\",\\\"akuFj\\\":\\\"default_hidden.b7ff1915.png\\\",\\\"6Ukj4\\\":\\\"index.fe75786a.js\\\",\\\"aRedu\\\":\\\"read.2185e46a.js\\\"}\"));","// import './js/add-to-favorite';\nimport './js/current-page';\nimport './js/mobile-menu';\nimport './js/toggle-switcher-theme';\nimport './js/search-form';\nimport './js/formOpen';\nimport './js/formRegFatchData';\n// import './js/to-favorite';\nimport './js/favorite-page';\nimport './js/btn-scroll-up';\n","module.exports = require('./helpers/bundle-url').getBundleURL('StDo9') + require('./helpers/bundle-manifest').resolve(\"iBapZ\");","module.exports = require('./helpers/bundle-url').getBundleURL('StDo9') + require('./helpers/bundle-manifest').resolve(\"aJDWo\");","module.exports = require('./helpers/bundle-url').getBundleURL('StDo9') + require('./helpers/bundle-manifest').resolve(\"akuFj\");","import svgSprite from '../images/icons/icons.svg';\nimport defImg from '../images/defaultimage.jpg';\nimport defImgPng from '../images/default_hidden.png';\nimport { checkFavorites } from './btn-add-remove';\nimport { readMore } from './btn-read-more';\n\nconst favoriteNewsCardEl = document.querySelector('.favorite-news-card');\nconst favoriteList = JSON.parse(localStorage.getItem('favoriteList')) || [];\n\nfavoriteNewsCardEl.addEventListener('click', deleteFromFavorites);\n\nconst readMoreButtons = document.querySelectorAll('.news-card__read-more');\nreadMoreButtons.forEach(button => button.addEventListener('click', readMore));\n\nrenderArticle(favoriteList);\n\nfunction renderArticle(res) {\n  if (!res || res.length === 0) {\n    pageEmpty();\n  }\n\n  let newsId = [];\n  if (res.length) {\n    newsId = res.map(({ id }) => id.toUpperCase());\n  }\n\n  const markup = `<ul class=\"news-card__image-container\">${res\n    .map(\n      ({ abstract, section, title, published_date, multimedia = [], url }) => {\n        const bool = newsId.includes(title.toUpperCase());\n        const articleTitle = bool ? 'Remove from favorite' : 'Add to favorite';\n        const iconClass = bool ? 'icon-favorite' : 'icon-heart';\n\n        const imageUrl =\n          multimedia && multimedia[2]?.url ? multimedia[2].url : defImg;\n        const imageAlt =\n          multimedia && multimedia[2]?.caption\n            ? multimedia[2].caption\n            : 'Default Image';\n\n        return `<li class=\"news-card__item\">\n   <div class=\"news-card__foto\">\n    <img src=\"${imageUrl}\" alt=\"${imageAlt}\" class=\"news-card__image\">\n  <div class=\"news-card__category\">\n   ${section}\n  </div>\n  <button class=\"news-card__favorite-button\" data-news-id=\"${title}\">${articleTitle}<svg width=\"13\" height=\"12\" class=\"news-card__favorite-icon\">\n    <use href=\"${svgSprite}#${iconClass}\"></use></svg>\n\n  </button>\n  </div>\n  <div class=\"news-card__description\">\n  <h2 class=\"news-card__title\">\n    ${title}\n  </h2>\n  <p class=\"news-card__abstract\">\n    ${abstract}\n  </p>\n  </div>\n  <div class=\"news-card__container\">\n  <div class=\"news-card__date\">\n    ${published_date}\n  </div>\n  <a href=\"${url}\" target=\"_blank\" rel=\"noreferrer noopener nofollow\" class=\"news-card__read-more\" data-news-id=\"${title}\">\n    Read more\n  </a>\n \n  </div>\n  </li>\n`;\n      }\n    )\n    .join('')}\n    </ul>`;\n  favoriteNewsCardEl.insertAdjacentHTML('beforeEnd', markup);\n  checkFavorites(favoriteList);\n}\n\nfunction deleteFromFavorites(event) {\n  const favoriteList = JSON.parse(localStorage.getItem('favoriteList')) || [];\n  const targetEl = event.target;\n  console.log(targetEl);\n\n  const newsId = targetEl.dataset.newsId;\n  const favoriteIndex = favoriteList.findIndex(\n    favorite => favorite.title === newsId\n  );\n  if (favoriteIndex !== -1) {\n    favoriteList.splice(favoriteIndex, 1);\n    localStorage.setItem('favoriteList', JSON.stringify(favoriteList));\n    location.reload();\n    // renderArticle(favoriteList);\n  }\n}\n\nfunction pageEmpty() {\n  const markup = `\n    <div class=\"page-empty\">\n    <h2 class=\"page-empty__text\">You don't have any favorite news</h2>\n    <img src=\"${defImgPng}\" alt=\"You have no favorite news\" class=\"page-empty__img\">\n    </div>`;\n  favoriteNewsCardEl.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["parcelRequire","register","JSON","parse","$eb8ff860877a30b2$exports","getBundleURL","resolve","$5727b83f7e2ca9e3$exports","$1f746855717e65c7$exports","$732ea10bcbd98d8a$var$favoriteNewsCardEl","document","querySelector","$732ea10bcbd98d8a$var$favoriteList","localStorage","getItem","addEventListener","event","favoriteList1","targetEl","target","console","log","newsId","dataset","favoriteIndex","findIndex","favorite","title","splice","setItem","stringify","location","reload","querySelectorAll","forEach","button","$jIMBh","readMore","res","length","markup","concat","$parcel$interopDefault","insertAdjacentHTML","$732ea10bcbd98d8a$var$pageEmpty","map","param","id","toUpperCase","ref","ref1","abstract","section","published_date","_multimedia","multimedia","url","bool","includes","articleTitle","iconClass","imageUrl","imageAlt","caption","join","$4MvEs","checkFavorites","$732ea10bcbd98d8a$var$renderArticle"],"version":3,"file":"favorite.3b07331d.js.map"}